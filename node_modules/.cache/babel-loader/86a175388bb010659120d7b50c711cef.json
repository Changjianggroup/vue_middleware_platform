{"remainingRequest":"/data/software/vue_middleware_platform/node_modules/thread-loader/dist/cjs.js!/data/software/vue_middleware_platform/node_modules/babel-loader/lib/index.js!/data/software/vue_middleware_platform/src/store/modules/user.js","dependencies":[{"path":"/data/software/vue_middleware_platform/src/store/modules/user.js","mtime":1609054665502},{"path":"/data/software/vue_middleware_platform/node_modules/cache-loader/dist/cjs.js","mtime":1609060265603},{"path":"/data/software/vue_middleware_platform/node_modules/thread-loader/dist/cjs.js","mtime":1609060265532},{"path":"/data/software/vue_middleware_platform/node_modules/babel-loader/lib/index.js","mtime":1609060265632}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.trim\";\nimport { login, logout, getInfo } from '@/api/login';\nimport { getToken, setToken, removeToken } from '@/utils/auth';\nvar user = {\n  state: {\n    token: getToken(),\n    username: '',\n    avatar: '',\n    roles: [],\n    is_superuser: ''\n  },\n  mutations: {\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_USERNAME: function SET_USERNAME(state, username) {\n      state.username = username;\n    },\n    SET_IS_SUPERUSER: function SET_IS_SUPERUSER(state, is_superuser) {\n      state.is_superuser = is_superuser;\n    },\n    SET_AVATAR: function SET_AVATAR(state, avatar) {\n      state.avatar = avatar;\n    },\n    SET_ROLES: function SET_ROLES(state, roles) {\n      state.roles = roles;\n    }\n  },\n  actions: {\n    // 登录\n    Login: function Login(_ref, userInfo) {\n      var commit = _ref.commit;\n      var username = userInfo.username.trim();\n      return new Promise(function (resolve, reject) {\n        login(username, userInfo.password).then(function (response) {\n          setToken(response.token);\n          commit('SET_TOKEN', response.token);\n          resolve();\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 获取用户信息\n    GetInfo: function GetInfo(_ref2) {\n      var commit = _ref2.commit,\n          state = _ref2.state;\n      return new Promise(function (resolve, reject) {\n        getInfo(state.token).then(function (response) {\n          commit('SET_USERNAME', response.username);\n          commit('SET_IS_SUPERUSER', response.is_superuser);\n          resolve(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 登出\n    LogOut: function LogOut(_ref3) {\n      var commit = _ref3.commit,\n          state = _ref3.state;\n      return new Promise(function (resolve, reject) {\n        commit('SET_TOKEN', '');\n        removeToken();\n        logout(state.username).then(function (response) {\n          resolve(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 前端 登出\n    FedLogOut: function FedLogOut(_ref4) {\n      var commit = _ref4.commit;\n      return new Promise(function (resolve) {\n        commit('SET_TOKEN', '');\n        removeToken();\n        resolve();\n      });\n    }\n  }\n};\nexport default user;",null]}