{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-d83bc75a\"],{2612:function(t,e,a){\"use strict\";a.d(e,\"d\",(function(){return n})),a.d(e,\"b\",(function(){return i})),a.d(e,\"e\",(function(){return s})),a.d(e,\"c\",(function(){return l})),a.d(e,\"f\",(function(){return u})),a.d(e,\"a\",(function(){return o}));var r=a(\"b775\");function n(t){return Object(r[\"a\"])({url:\"/users/\",method:\"get\",params:t})}function i(t){return Object(r[\"a\"])({url:\"/users/\",method:\"post\",data:t})}function s(t){return Object(r[\"a\"])({url:\"/users/\"+t.id+\"/\",method:\"patch\",data:t})}function l(t){return Object(r[\"a\"])({url:\"/users/\"+t+\"/\",method:\"delete\"})}function u(t,e){return Object(r[\"a\"])({url:\"/usergroup/\"+t+\"/\",method:\"patch\",data:e})}function o(t,e){return Object(r[\"a\"])({url:\"/chuserpasswd/\"+t+\"/\",method:\"put\",data:e})}},\"63b6f\":function(t,e,a){\"use strict\";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"el-card\",{staticClass:\"box-card\"},[a(\"el-form\",{ref:\"queryForm\",attrs:{model:t.queryParams,inline:!0,\"label-width\":\"68px\"}},[a(\"el-form-item\",{attrs:{label:\"访问地址\",prop:\"remote_ip\"}},[a(\"el-input\",{staticStyle:{width:\"240px\"},attrs:{placeholder:\"请输入登录地址\",clearable:\"\",size:\"small\"},model:{value:t.queryParams.remote_ip,callback:function(e){t.$set(t.queryParams,\"remote_ip\",e)},expression:\"queryParams.remote_ip\"}})],1),a(\"el-form-item\",{attrs:{label:\"用户名称\",prop:\"username\"}},[a(\"el-input\",{staticStyle:{width:\"240px\"},attrs:{placeholder:\"请输入用户名称\",clearable:\"\",size:\"small\"},model:{value:t.username,callback:function(e){t.username=e},expression:\"username\"}})],1),a(\"div\",{staticClass:\"block\"},[a(\"span\",{staticClass:\"demonstration\"},[t._v(\"开始时间  \")]),a(\"el-date-picker\",{attrs:{align:\"right\",type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"选择日期\",\"picker-options\":t.pickerOptions},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:\"start_date\"}}),a(\"span\",{staticClass:\"demonstration\"},[t._v(\"  结束时间  \")]),a(\"el-date-picker\",{attrs:{align:\"right\",type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"选择日期\",\"picker-options\":t.pickerOptions},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:\"end_date\"}}),t._l(t.statusOptions,(function(t){return a(\"el-option\",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),a(\"span\",{staticClass:\"span\"},[t._v(\"  \")]),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:t.handleQuery}},[t._v(\"搜索\")]),a(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:t.resetQuery}},[t._v(\"重置\")])],1)],2)],1),a(\"el-row\",{staticClass:\"mb8\",attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:1.5}},[a(\"el-button\",{attrs:{type:\"warning\",icon:\"el-icon-download\",size:\"mini\"},on:{click:t.handleExport}},[t._v(\"导出\")])],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{data:t.list}},[a(\"el-table-column\",{attrs:{label:\"序号\",width:\"50\",align:\"center\",prop:\"num\"}}),a(\"el-table-column\",{attrs:{label:\"id\",width:\"50\",align:\"center\",prop:\"id\"}}),a(\"el-table-column\",{attrs:{label:\"请求相对路径\",width:\"180\",align:\"center\",prop:\"url\"}}),a(\"el-table-column\",{attrs:{label:\"请求方法\",align:\"center\",prop:\"method\",width:\"150\"}}),a(\"el-table-column\",{attrs:{label:\"请求参数\",width:\"200\",align:\"center\",prop:\"query_string\"}}),a(\"el-table-column\",{attrs:{label:\"提交数据\",width:\"200\",align:\"center\",prop:\"post_data\"}}),a(\"el-table-column\",{attrs:{label:\"请求IP地址\",align:\"center\",prop:\"remote_ip\",width:\"200\"}}),a(\"el-table-column\",{attrs:{label:\"操作时间\",align:\"center\",prop:\"datetime\",width:\"250\"}}),a(\"el-table-column\",{attrs:{label:\"用户名\",align:\"center\",prop:\"user_id\",width:\"80\",formatter:t.formatuserID}})],1),a(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.total>0,expression:\"total>0\"}],attrs:{total:t.total,page:t.queryParams.page,limit:t.queryParams.page_size},on:{\"update:page\":function(e){return t.$set(t.queryParams,\"page\",e)},\"update:limit\":function(e){return t.$set(t.queryParams,\"page_size\",e)},pagination:t.getList}})],1)},n=[],i=a(\"77c4\"),s=a(\"2612\"),l=a(\"ed08\"),u={name:\"Requestinfor\",data:function(){return{loading:!0,ids:[],multiple:!0,username:\"\",total:0,list:[],userList:[],statusOptions:[],queryParams:{page:1,page_size:10,user_id:void 0,remote_ip:void 0}}},created:function(){this.getUser(),this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(i[\"c\"])(this.queryParams).then((function(e){for(var a in t.list=e.results,t.list)t.list[a][\"num\"]=parseInt(a)+1;t.total=e.count,t.loading=!1}))},getUser:function(){var t=this;Object(s[\"d\"])().then((function(e){t.userList=e.results}))},handleQuery:function(){for(var t in this.queryParams.page=1,this.userList)this.username===this.userList[t][\"username\"]&&(this.queryParams.user_id=this.userList[t][\"id\"]);this.queryParams.event_type=this.event_type_value,this.getList()},resetQuery:function(){this.username=\"\",this.queryParams.remote_ip=\"\",this.queryParams.user_id=\"\",this.handleQuery()},formatuserID:function(t,e){var a=\"\";for(var r in this.userList)t.user_id===this.userList[r][\"id\"]&&(a=this.userList[r][\"username\"]);return a},handleExport:function(){var t=this;this.$confirm(\"是否确认导出API请求数据表单?\",\"警告\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){t.downloadLoading=!0,a.e(\"chunk-5949f95f\").then(a.bind(null,\"8530\")).then((function(e){var a=[\"编号\",\"id\",\"请求相对路径\",\"请求方法\",\"请求参数\",\"提交数据\",\"请求IP地址\",\"操作时间\",\"用户ID\",\"用户名\"],r=[\"num\",\"id\",\"url\",\"remote_ip\",\"method\",\"query_string\",\"post_data\",\"datetime\",\"user_id\",\"username\"];for(var n in t.list)for(var i in t.userList)t.list[n][\"user_id\"]===t.userList[i][\"id\"]&&(t.list[n][\"username\"]=t.userList[i][\"username\"]);var s=t.list,u=Object(l[\"a\"])(r,s);e.export_json_to_excel({header:a,data:u,filename:\"API请求日志\",autoWidth:!0,bookType:\"xlsx\"}),t.downloadLoading=!1}))}))}}},o=u,c=a(\"2877\"),d=Object(c[\"a\"])(o,r,n,!1,null,\"58420804\",null);e[\"default\"]=d.exports},\"77c4\":function(t,e,a){\"use strict\";a.d(e,\"b\",(function(){return n})),a.d(e,\"a\",(function(){return i})),a.d(e,\"c\",(function(){return s}));var r=a(\"b775\");function n(t){return Object(r[\"a\"])({url:\"/audit/login/\",method:\"get\",params:t})}function i(t){return Object(r[\"a\"])({url:\"/audit/crud/\",method:\"get\",params:t})}function s(t){return Object(r[\"a\"])({url:\"/audit/request/\",method:\"get\",params:t})}}}]);","extractedComments":[]}