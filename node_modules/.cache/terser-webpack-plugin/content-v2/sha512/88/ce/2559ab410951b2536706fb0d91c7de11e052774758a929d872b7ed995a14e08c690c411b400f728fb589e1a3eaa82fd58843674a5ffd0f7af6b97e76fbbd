{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4e6ae98c\"],{\"17aa\":function(e,t,a){\"use strict\";a(\"5016\")},\"274b\":function(e,t,a){},\"2ab3\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",{staticClass:\"crumbs\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",[a(\"i\",{staticClass:\"el-icon-lx-emoji\"}),e._v(\"rabbitmq集群管理\")])],1)],1),a(\"div\",{staticClass:\"container\"},[a(\"el-row\",{attrs:{gutter:20}},[a(\"el-col\",{attrs:{span:3,offset:1}},[a(\"div\",{staticClass:\"grid-content bg-purple\"},[a(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:e.handleDialogCreate}},[e._v(\"新增rabbitmq集群\")])],1)]),a(\"el-col\",{attrs:{span:3}},[a(\"div\",{staticClass:\"grid-content bg-purple\"})]),a(\"el-col\",{attrs:{span:6}},[a(\"div\",{staticClass:\"grid-content bg-purple\"})]),a(\"el-col\",{attrs:{span:3}},[a(\"div\",{staticClass:\"grid-content bg-purple\"})])],1),a(\"server-list\",{ref:\"serverListTable\",attrs:{values:e.server},on:{mulselect:e.handleSelectionChange,edit:e.handleDialogUpdate,delete:e.handleDeleteServer,operation:e.handleOpertionServer,copyUsername:e.handleCopyUsername,copyPassword:e.handleCopyPassword}}),a(\"el-dialog\",{attrs:{visible:e.dialogVisibleCreate,title:\"新增服务器\",width:\"40%\"},on:{\"update:visible\":function(t){e.dialogVisibleCreate=t}}},[a(\"server-form\",{ref:\"serverCreateForm\",attrs:{bname:e.createString},on:{submit:e.handleSubmitCreate,cancel:e.handleCreateCancel}})],1),a(\"el-dialog\",{attrs:{visible:e.dialogVisibleUpdate,title:\"修改服务器信息\",width:\"40%\"},on:{\"update:visible\":function(t){e.dialogVisibleUpdate=t},closed:e.closedUpdateDialog}},[a(\"server-form\",{ref:\"serverUpdateForm\",attrs:{form:e.serverInfo,bname:e.updateString},on:{submit:e.handleSubmitUpdate,cancel:e.handleUpdateCancel}})],1),a(\"el-row\",{staticClass:\"bottom-class\"},[a(\"el-col\",{attrs:{span:1}},[a(\"div\",{staticClass:\"grid-content bg-purple sel-count\"},[e._v(\"\\n          \"+e._s(e.multipleSelection.length)+\" 选择\\n        \")])]),a(\"el-col\",{attrs:{span:1}},[a(\"div\",{staticClass:\"grid-content bg-purple\"},[a(\"el-button\",{attrs:{type:\"danger\",size:\"mini\"},on:{click:e.handleMultiDeleteServer}},[e._v(\"删除\")])],1)]),a(\"el-col\",{attrs:{span:8,offset:6}},[a(\"div\",{staticClass:\"pagination\"},[a(\"el-pagination\",{attrs:{\"current-page\":e.currentPage1,\"page-sizes\":[10,20,100,200],total:e.totalNum,layout:\"total, sizes, prev, pager, next, jumper\"},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)])],1)],1)])},s=[],n=(a(\"ac6a\"),a(\"f3e2\"),a(\"c480\")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"server-list\"},[a(\"el-table\",{ref:\"listTable\",staticStyle:{width:\"100%\"},attrs:{data:e.values},on:{\"selection-change\":e.schange}},[a(\"el-table-column\",{attrs:{type:\"selection\",width:\"35\"}}),a(\"el-table-column\",{attrs:{type:\"expand\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-form\",{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",inline:\"\"}},[a(\"el-form-item\",{attrs:{label:\"id:\"}},[a(\"span\",[e._v(e._s(t.row.id))])]),a(\"el-form-item\",{attrs:{label:\"rabbitmq集群名:\"}},[a(\"span\",[e._v(e._s(t.row.cluster_name))])]),a(\"el-form-item\",{attrs:{label:\"rabbitmq-web管理界面地址\"}},[a(\"span\",[e._v(e._s(t.row.url))])]),a(\"el-form-item\",{attrs:{label:\"登录账户\"}},[a(\"span\",[e._v(e._s(t.row.username))])]),a(\"el-form-item\",{attrs:{label:\"登录密码\"}},[a(\"span\",[e._v(e._s(t.row.password))])]),a(\"el-form-item\",{attrs:{label:\"描述:\"}},[a(\"span\",[e._v(e._s(t.row.description))])])],1)]}}])}),a(\"el-table-column\",{attrs:{label:\"id\",\"min-width\":\"20\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.row.id))])]}}])}),a(\"el-table-column\",{attrs:{label:\"rabbitmq集群名\",\"min-width\":\"80\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.row.cluster_name))])]}}])}),a(\"el-table-column\",{attrs:{label:\"url\",\"min-width\":\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.row.url))])]}}])}),a(\"el-table-column\",{attrs:{label:\"集群描述\",\"min-width\":\"100\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"span\",[e._v(e._s(t.row.description))])]}}])}),a(\"el-table-column\",{attrs:{label:\"控制\",\"min-width\":\"200\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return e.serverEdit(t.row)}}},[e._v(\"编辑\")]),a(\"el-button\",{attrs:{size:\"mini\",type:\"danger\"},on:{click:function(a){return e.serverDelete(t.row)}}},[e._v(\"删除\")]),a(\"el-button\",{attrs:{size:\"mini\",type:\"success\"},on:{click:function(a){return e.serverOperation(t.row)}}},[e._v(\"操作\")]),a(\"el-button\",{staticClass:\"copyUsername\",attrs:{size:\"mini\",type:\"success\"},on:{click:function(a){return e.copyUsername(t.row)}}},[e._v(\"复制账号\")]),a(\"el-button\",{staticClass:\"copyPassword\",attrs:{size:\"mini\",type:\"success\"},on:{click:function(a){return e.copyPassword(t.row)}}},[e._v(\"复制密码\")])]}}])})],1)],1)},l=[],o={name:\"ServerList\",props:{values:{type:Array,default:function(){return[]}},mulselect:{type:Array,default:function(){return[]}}},methods:{schange:function(e){this.$emit(\"mulselect\",e)},serverEdit:function(e){this.$emit(\"edit\",e)},serverDelete:function(e){var t=this;this.$confirm(\"此操作将删除该\".concat(e.cluster_name,\" 集群记录, 是否继续?\"),\"删除rabbitmq集群\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){t.$emit(\"delete\",e.id)})).catch((function(){t.$message({type:\"info\",message:\"已取消删除\"})}))},serverOperation:function(e){this.$emit(\"request\",e)},copyUsername:function(e){this.$emit(\"copyUsername\",e.username)},copyPassword:function(e){this.$emit(\"copyPassword\",e.password)}}},c=o,u=(a(\"83fc\"),a(\"2877\")),m=Object(u[\"a\"])(c,i,l,!1,null,\"3f8b7f68\",null),d=m.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"el-form\",{ref:\"form\",staticClass:\"server-form\",attrs:{model:e.form,rules:e.rules,\"label-width\":\"120px\"}},[a(\"el-form-item\",{attrs:{label:\"rabbitmq集群名\",prop:\"cluster_name\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入rabbitmq集群名\"},model:{value:e.form.cluster_name,callback:function(t){e.$set(e.form,\"cluster_name\",t)},expression:\"form.cluster_name\"}})],1),a(\"el-form-item\",{attrs:{label:\"web管理界面url\",prop:\"url\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入web管理界面地址\"},model:{value:e.form.url,callback:function(t){e.$set(e.form,\"url\",t)},expression:\"form.url\"}})],1),a(\"el-form-item\",{attrs:{label:\"访问账户\",prop:\"username\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入web管理界面访问用户名\"},model:{value:e.form.username,callback:function(t){e.$set(e.form,\"username\",t)},expression:\"form.username\"}})],1),a(\"el-form-item\",{attrs:{label:\"访问密码\",prop:\"password\"}},[a(\"el-input\",{attrs:{placeholder:\"请输入web管理界面访问密码\"},model:{value:e.form.password,callback:function(t){e.$set(e.form,\"password\",t)},expression:\"form.password\"}})],1),a(\"el-form-item\",{attrs:{label:\"集群描述\",prop:\"description\"}},[a(\"el-input\",{attrs:{placeholder:\"描述\"},model:{value:e.form.description,callback:function(t){e.$set(e.form,\"description\",t)},expression:\"form.description\"}})],1),a(\"el-form-item\",{staticClass:\"button-right\"},[a(\"el-button\",{attrs:{size:\"small\"},on:{click:e.cancelForm}},[e._v(\"取消\")]),a(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:e.submitForm}},[e._v(e._s(e.bname))])],1)],1)],1)},f=[],b={name:\"ServerForm\",props:{form:{type:Object,default:function(){return{cluster_name:\"\",url:\"\",username:\"\",password:\"\",description:\"\"}}},bname:{type:String,required:!0}},data:function(){return{rules:{cluster_name:[{required:!0,message:\"请输入rabbitmq集群名字\",trigger:\"blur\"}],url:[{required:!0,message:\"请输入rabbitmq网页管理界面地址\",trigger:\"blur\"},{validator:function(e,t,a){!1===/^http(s)?:\\/\\/.*$/.test(t)?a(new Error(\"请按要求输入rabbitmq网页管理界面地址，要求http(s)://开头\")):a()},trigger:\"blur\"}],username:[{required:!0,message:\"请输入web管理界面账户\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入web管理界面密码\",trigger:\"blur\"}],description:[{max:255,message:\"长度不能超过255个字符\",trigger:\"blur\"}]}}},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&e.$emit(\"submit\",e.form)}))},cancelForm:function(){this.$emit(\"cancel\")}}},h=b,g=(a(\"17aa\"),Object(u[\"a\"])(h,p,f,!1,null,\"1bcab697\",null)),v=g.exports,y={name:\"rabbitmqManagement\",components:{ServerList:d,ServerForm:v},data:function(){return{serverid:\"\",vauleUsername:\"\",vaulePassword:\"\",server:[],multipleSelection:[],serverOption:[],dialogVisibleCreate:!1,dialogVisibleUpdate:!1,updateServerInfo:{},serverInfo:{},createString:\"立即创建\",updateString:\"立即更新\",totalNum:0,currentPage1:1,params:{page:1,keywords:\"\",page_size:10},cluster_name_list:[],cluster_name_options:[]}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;Object(n[\"c\"])(this.params).then((function(t){e.server=t.results,e.totalNum=t.count}),(function(t){e.$message({type:\"error\",message:t})}))},handleSubmitCreate:function(e){var t=this;Object(n[\"a\"])(e).then((function(){t.fetchData(),t.dialogVisibleCreate=!1,t.$refs.serverCreateForm.form.resetFields().catch((function(e){})),t.$message({type:\"success\",message:\"创建成功\"})}),(function(e){t.$message({type:\"error\",message:e})}))},handleSubmitUpdate:function(e){var t=this;Object(n[\"d\"])(e).then((function(){t.fetchData(),t.dialogVisibleUpdate=!1,t.$message({type:\"success\",message:\"更新成功\"})}),(function(e){t.$message({type:\"error\",message:e.response})}))},handleDialogCreate:function(){this.dialogVisibleCreate=!0},handleDialogUpdate:function(e){this.serverInfo=e,this.dialogVisibleUpdate=!0},closedUpdateDialog:function(){},handleDeleteServer:function(e){var t=this;Object(n[\"b\"])(e).then((function(){t.totalNum%t.params.page_size===1&&(t.params.page=t.params.page-1),t.fetchData(),t.$message({type:\"success\",message:\"删除成功!\"})}),(function(e){t.$message({type:\"error\",message:e})}))},handleOpertionServer:function(e){window.open(e.url,\"_blank\")},handleCopyUsername:function(e){var t=document.createElement(\"input\");t.style.position=\"relative\",t.style.zIndex=\"-9\",document.body.appendChild(t),t.value=e,t.select(),document.execCommand(\"copy\"),document.body.removeChild(t),this.$message({type:\"success\",message:\"账户复制成功\"})},handleCopyPassword:function(e){var t=document.createElement(\"input\");t.style.position=\"relative\",t.style.zIndex=\"-9\",document.body.appendChild(t),t.value=e,t.select(),document.execCommand(\"copy\"),document.body.removeChild(t),this.$message({type:\"success\",message:\"密码复制成功\"})},handleCurrentChange:function(e){this.params.page=e,this.fetchData()},handleSizeChange:function(e){this.params.page_size=e,this.fetchData()},handleCreateCancel:function(){this.dialogVisibleCreate=!1,this.fetchData()},handleUpdateCancel:function(){this.dialogVisibleUpdate=!1,this.fetchData()},handleFilter:function(){this.params.page=1,this.fetchData()},handleSelectionChange:function(e){this.multipleSelection=e},handleMultiDeleteServer:function(){var e=this;(this.totalNum-this.multipleSelection.length)%this.params.page_size===0&&(this.params.page=this.params.page-1),this.multipleSelection.forEach((function(t){deleteServer(t.id).then((function(){e.fetchData(),e.$message({type:\"success\",message:\"删除成功!\"})}))}),(function(t){e.$message({type:\"error\",message:t})})),this.$refs.serverListTable.$refs.listTable.clearSelection()}}},_=y,w=(a(\"4e55\"),Object(u[\"a\"])(_,r,s,!1,null,\"820d21f4\",null));t[\"default\"]=w.exports},\"4e55\":function(e,t,a){\"use strict\";a(\"274b\")},5016:function(e,t,a){},\"83fc\":function(e,t,a){\"use strict\";a(\"da2b\")},c480:function(e,t,a){\"use strict\";a.d(t,\"c\",(function(){return s})),a.d(t,\"a\",(function(){return n})),a.d(t,\"b\",(function(){return i})),a.d(t,\"d\",(function(){return l}));var r=a(\"b775\");a(\"bc3a\");function s(e){return Object(r[\"a\"])({url:\"/rabbitmq/management/\",method:\"get\",params:e})}function n(e){return Object(r[\"a\"])({url:\"/rabbitmq/management/\",method:\"post\",data:e})}function i(e){return Object(r[\"a\"])({url:\"/rabbitmq/management/\"+e+\"/\",method:\"delete\"})}function l(e){return Object(r[\"a\"])({url:\"/rabbitmq/management/\"+e.id+\"/\",method:\"patch\",data:e})}},da2b:function(e,t,a){}}]);","extractedComments":[]}