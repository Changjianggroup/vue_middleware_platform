{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-c54a0ac0\"],{\"77c4\":function(t,e,a){\"use strict\";a.d(e,\"b\",(function(){return i})),a.d(e,\"a\",(function(){return r})),a.d(e,\"c\",(function(){return s}));var n=a(\"b775\");function i(t){return Object(n[\"a\"])({url:\"/audit/login/\",method:\"get\",params:t})}function r(t){return Object(n[\"a\"])({url:\"/audit/crud/\",method:\"get\",params:t})}function s(t){return Object(n[\"a\"])({url:\"/audit/request/\",method:\"get\",params:t})}},d91d:function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"el-card\",{staticClass:\"box-card\"},[a(\"el-form\",{ref:\"queryForm\",attrs:{model:t.queryParams,inline:!0,\"label-width\":\"68px\"}},[a(\"el-form-item\",{attrs:{label:\"登录地址\",prop:\"remote_ip\"}},[a(\"el-input\",{staticStyle:{width:\"240px\"},attrs:{placeholder:\"请输入登录地址\",clearable:\"\",size:\"small\"},model:{value:t.queryParams.remote_ip,callback:function(e){t.$set(t.queryParams,\"remote_ip\",e)},expression:\"queryParams.remote_ip\"}})],1),a(\"el-form-item\",{attrs:{label:\"用户名称\",prop:\"username\"}},[a(\"el-input\",{staticStyle:{width:\"240px\"},attrs:{placeholder:\"请输入用户名称\",clearable:\"\",size:\"small\"},model:{value:t.queryParams.username,callback:function(e){t.$set(t.queryParams,\"username\",e)},expression:\"queryParams.username\"}})],1),a(\"div\",{staticClass:\"block\"},[a(\"span\",{staticClass:\"demonstration\"},[t._v(\"开始时间  \")]),a(\"el-date-picker\",{attrs:{align:\"right\",type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"选择日期\",\"picker-options\":t.pickerOptions},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:\"start_date\"}}),a(\"span\",{staticClass:\"demonstration\"},[t._v(\"  结束时间  \")]),a(\"el-date-picker\",{attrs:{align:\"right\",type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"选择日期\",\"picker-options\":t.pickerOptions},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:\"end_date\"}}),t._l(t.statusOptions,(function(t){return a(\"el-option\",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),a(\"span\",{staticClass:\"span\"},[t._v(\"  \")]),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:t.handleQuery}},[t._v(\"搜索\")]),a(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:t.resetQuery}},[t._v(\"重置\")])],1)],2)],1),a(\"el-row\",{staticClass:\"mb8\",attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:1.5}},[a(\"el-button\",{attrs:{type:\"warning\",icon:\"el-icon-download\",size:\"mini\"},on:{click:t.handleExport}},[t._v(\"导出\")])],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{data:t.list}},[a(\"el-table-column\",{attrs:{label:\"序号\",width:\"100\",align:\"center\",prop:\"num\"}}),a(\"el-table-column\",{attrs:{label:\"用户ID\",width:\"150\",align:\"center\",prop:\"user_id\"}}),a(\"el-table-column\",{attrs:{label:\"登录用户\",width:\"200\",align:\"center\",prop:\"username\"}}),a(\"el-table-column\",{attrs:{label:\"登录IP\",align:\"center\",prop:\"remote_ip\",width:\"300\"}}),a(\"el-table-column\",{attrs:{label:\"登录状态\",width:\"100\",align:\"center\",prop:\"login_type\",formatter:t.formatLoginType}}),a(\"el-table-column\",{attrs:{label:\"更新时间\",align:\"center\",prop:\"datetime\",width:\"250\"}})],1),a(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.total>0,expression:\"total>0\"}],attrs:{total:t.total,page:t.queryParams.page,limit:t.queryParams.page_size},on:{\"update:page\":function(e){return t.$set(t.queryParams,\"page\",e)},\"update:limit\":function(e){return t.$set(t.queryParams,\"page_size\",e)},pagination:t.getList}})],1)},i=[],r=(a(\"78ce\"),a(\"77c4\")),s=a(\"ed08\"),l={name:\"Logininfor\",data:function(){return{loading:!0,ids:[],multiple:!0,total:0,list:[],statusOptions:[],queryParams:{page:1,page_size:10,remote_ip:void 0,username:void 0,login_type:void 0,start_date:void 0,end_date:void 0},start_date:\"\",end_date:\"\",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:\"今天\",onClick:function(t){t.$emit(\"pick\",new Date)}},{text:\"昨天\",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit(\"pick\",e)}},{text:\"一周前\",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit(\"pick\",e)}}]}}},created:function(){this.getList()},methods:{addDateTime:function(t){var e=new Date(t);return e=e.setDate(e.getDate()+1),e=new Date(e),e.toLocaleDateString()},getList:function(){var t=this;this.loading=!0,this.start_date&&this.end_date?(this.queryParams.start_date=this.start_date,this.queryParams.end_date=this.addDateTime(this.end_date)):(this.queryParams.start_date=void 0,this.queryParams.end_date=void 0),Object(r[\"b\"])(this.queryParams).then((function(e){for(var a in t.list=e.results,t.list)t.list[a][\"num\"]=parseInt(a)+1;t.total=e.count,t.loading=!1}))},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],this.start_date=\"\",this.end_date=\"\",this.resetForm(\"queryForm\"),this.handleQuery()},formatLoginType:function(t,e){return 0===t.login_type?\"登录\":1===t.login_type?\"登出\":2===t.login_type?\"登录失败\":\"位置状态\"},handleExport:function(){var t=this;this.$confirm(\"是否确认导出现在的登录日志表单?\",\"警告\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){t.downloadLoading=!0,a.e(\"chunk-5949f95f\").then(a.bind(null,\"8530\")).then((function(e){var a=[\"编号\",\"用户编号\",\"用户名称\",\"登陆IP\",\"登陆状态\",\"登陆日期\"],n=[\"num\",\"user_id\",\"username\",\"remote_ip\",\"login_type\",\"datetime\"],i=t.list,r=Object(s[\"a\"])(n,i);e.export_json_to_excel({header:a,data:r,filename:\"登陆日志\",autoWidth:!0,bookType:\"xlsx\"}),t.downloadLoading=!1}))}))}}},o=l,u=a(\"2877\"),d=Object(u[\"a\"])(o,n,i,!1,null,null,null);e[\"default\"]=d.exports}}]);","extractedComments":[]}